Console:
  name: console
  providers:
    AwsLocalProvider:
      id: AwsLocalProvider
      type: AwsCredentialsProvider
      credentials:
        profileName: ts
  dashboards:
    MainDashboard:
      id: MainDashboard
      route: main
      widgets:
        - $ref: '#/Console/widgets/EcsInfo'
        - $ref: '#/Console/widgets/EcsMonitoringTabs'

  widgets:
    EcsInfo:
      type: AwsEcsInfo
      displayName: Synth Service
      providers:
        - $ref: '#/Console/providers/AwsLocalProvider'
      region: us-east-1
      clusterName: cdk-synth-cluster
      serviceName: tinystacks-service
      
    EcsMonitoringTabs:
      type: Tabs
      displayName: Monitoring
      children:
        - $ref: '#/Console/widgets/Metrics'
        - $ref: '#/Console/widgets/Logs'
      tabNames:
        - 'Metrics'
        - 'Logs'
    Logs:
      type: AwsCloudWatchLogs
      displayName: cwlogs widget
      region: 'us-east-1'
      providers:
        - $ref: '#/Console/providers/AwsLocalProvider'
      logGroupName: 
        $ref: '#/Console/widgets/EcsInfo'
        path: images[0].cwLogsGroupArn
      timeRange:
        startTime: 1676911216118
        endTime: 1677256816118
    Metrics:
      type: AwsCloudWatchMetricGraph
      displayName: cwmetrics widget
      dependencies:
        - EcsWidget
      region: 'us-east-1'
      period: 1440
      providers:
        - $ref: '#/Console/providers/AwsLocalProvider'
      timeRange:
        time: 12
        unit: h
      metrics:
        - metricNamespace: ECS/ContainerInsights
          metricName: NetworkRxBytes
          metricDisplayName: Network Bytes/Sec
          dimensions: 
            - key: ClusterName
              value: cdk-synth-cluster
            - key: ServiceName
              value: tinystacks-service
        - metricNamespace: ECS/ContainerInsights
          metricName: NetworkRxBytes
          metricDisplayName: Max Network Bytes/Sec
          statistic: Maximum
          dimensions:
            - key: ClusterName
              value: cdk-synth-cluster
            - key: ServiceName
              value: tinystacks-service
  dependencies:
    Markdown: '@tinystacks/ops-core-widgets'
    Tabs: '@tinystacks/ops-core-widgets'
    Panel: '@tinystacks/ops-core-widgets'
    AwsCloudWatchLogs:        '@tinystacks/ops-aws-core-plugins'
    AwsCredentialsProvider:   '@tinystacks/ops-aws-core-plugins'
    AwsCloudWatchMetricGraph: '@tinystacks/ops-aws-core-plugins'
    AwsEcsInfo:               '@tinystacks/ops-aws-core-plugins'
    JsonTree:                 '@tinystacks/ops-aws-core-plugins'
